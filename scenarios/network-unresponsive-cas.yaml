# network configuration
---
apiVersion: "keramik.3box.io/v1alpha1"
kind: Network
metadata:
  name: db
spec:
  replicas: 2
  datadog:
    enabled: true
    version: "db-unresponsive-cas2"
    profilingEnabled: true
  cas:
    image: ceramicnetwork/ceramic-anchor-service:latest
    casResourceLimits:
      cpu: "250m"
      memory: "1Gi"
  ceramic:
    resourceLimits:
      cpu: "2000m"
      memory: "1Gi"
    ipfs:
      go:
        image: ceramicnetwork/go-ipfs-daemon:develop
        imagePullPolicy: IfNotPresent
        resourceLimits:
          cpu: "1000m"
          memory: "512M"
        #commands:
        # - ipfs config Routing.Type none

# Datadog secret configuration
---
apiVersion: v1
kind: Secret
metadata:
  name: datadog-secret
type: Opaque
stringData:
  api-key: "1196bb4bb87a822584de597c9a824cd5"
  app-key: "158dfe22a705b323768069dbc05fb7a682f0e821"

#datadog agaent configuration
---
kind: DatadogAgent
apiVersion: datadoghq.com/v2alpha1
metadata:
  name: datadog
spec:
  global:
    kubelet:
      tlsVerify: false
    site: us3.datadoghq.com
    credentials:
      apiSecret:
        secretName: datadog-secret
        keyName: api-key
      appSecret:
        secretName: datadog-secret
        keyName: app-key
  override:
    clusterAgent:
      image:
        name: gcr.io/datadoghq/cluster-agent:latest
    nodeAgent:
      image:
        name: gcr.io/datadoghq/agent:latest
  features:
    npm:
      enabled: true
    apm:
      enabled: true
      hostPortConfig:
        enabled: true
